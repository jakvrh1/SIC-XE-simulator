STARTT 	START 	0

		. TEST ECHONUM
		LDA =2303069
		JSUB ECHONUM
		
		. TEST ECHOCH
		.LDA =77
		.JSUB ECHOCH
		
		. TEST ECHONL
		.JSUB ECHONL
		
		. TEST ECHOSTR
		.LDA #STRING
		.JSUB ECHOSTR
		
		
HALT	J 		HALT

ECHOSTR
		STA NEXT
		
LOOP3	LDCH @NEXT
		WD STDOUT
		
		LDA NEXT
		ADD =1
		STA NEXT
		
		LDA @NEXT
		COMP =0
		JGT LOOP3
		
		RSUB
		

ECHONL	
		LDCH NEWLINE
		WD STDOUT
		RSUB
	
ECHOCH	
		STCH CHAR
		LDCH CHAR
		WD STDOUT
		RSUB
		

ECHONUM	
		STA TEMP_A
		STS TEMP_S
		STT TEMP_T
		
		CLEAR S
		CLEAR T
		
		LDS #DEC
		STS DEC_I
		RMO A, S
		
LOOP1	RMO S, A
		RMO S, T
		
		. A Z ZADNJO DEC
		DIV =10
		RMO A, S
		MUL =10
		SUBR T, A
		. A VEDNO MANJŠI OD T, ZATO DOBIMO ŠTEVKO, KI JE NEGATIVNA, POMNOŽIMO Z -1
		MUL NEG
		
		. ZAPIS
		STA @DEC_I
		. POGLEDAMO CE JE ŠE KAKSNA ŠTEVKA
		RMO S, A
		COMP =0
		
		. POVEČAMO ŠTEVEC
		LDA DEC_I
		ADD =3
		STA DEC_I
		
		JGT LOOP1
		
		. PO IZSTOPU JE INDEKS ZA EN ELEMENT NAPREJ, ZATO SUB
		SUB =3
		STA DEC_I
		
LOOP2 	. VSAKI ŠTEVKI RABIMO DODATI 48
		LDA @DEC_I
		ADD =48
		
		. ZAPIS ASCII KODE ŠTEVKE
		STCH CHAR
		
		. A SMO ŽE NA PRVEM NASLOVU (GREŠ OD VZADI NAPREJ, KOT NPR --DEC_I)?
		LDA DEC_I
		COMP #DEC
		
		. IZPIS ŠTEVKE
		LDCH CHAR
		WD STDOUT
		
		. ZMANJŠAMO ŠTEVEC
		LDA DEC_I
		SUB =3
		STA DEC_I

		JGT LOOP2
		
		. REGISTRE OBNOVIMO TAKO, KOT SO BILI PRED FUNKCIJO
		LDA TEMP_A
		LDS TEMP_S
		LDT TEMP_T
		
		RSUB
		
. DATA
NEG		WORD -1
NEWLINE BYTE 10
CHAR 	BYTE 0

NEXT 	WORD 0
STRING 	BYTE C'SIC/XE'
		BYTE X'00'

DEC_I	WORD 0
DEC		RESW 10

STDIN	BYTE X'00'
STDOUT	BYTE X'01'

TEMP_A	WORD 0
TEMP_S	WORD 0
TEMP_T	WORD 0